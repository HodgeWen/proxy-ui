---
phase: 11-ui-animation-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - web/src/components/ui/card.tsx
  - web/src/pages/Core.tsx
  - web/src/pages/Inbounds.tsx
  - web/src/pages/Certificates.tsx
  - web/src/pages/Users.tsx
  - web/src/pages/Subscriptions.tsx
autonomous: true
requirements: [UIANM-02, UIANM-04]

must_haves:
  truths:
    - "Cards show a subtle border glow on hover across all pages"
    - "Table rows highlight background on hover (already working, transition-colors 150ms)"
    - "Core page cards fade+scale in on first render"
    - "Inbounds, Users, Certificates, Subscriptions content areas fade in on first render"
    - "No layout shift during any entrance animation"
    - "Entrance animations play on mount only — data refresh does not replay"
    - "Hover transitions complete within 120-150ms"
  artifacts:
    - path: "web/src/components/ui/card.tsx"
      provides: "Card base with hover border transition"
      contains: "transition-colors duration-150"
    - path: "web/src/pages/Core.tsx"
      provides: "Core page with entrance animations on both cards"
      contains: "animate-in"
    - path: "web/src/pages/Inbounds.tsx"
      provides: "Inbounds page with entrance animation"
      contains: "animate-in"
    - path: "web/src/pages/Certificates.tsx"
      provides: "Certificates page with entrance animation"
      contains: "animate-in"
    - path: "web/src/pages/Users.tsx"
      provides: "Users page with entrance animation"
      contains: "animate-in"
    - path: "web/src/pages/Subscriptions.tsx"
      provides: "Subscriptions page with entrance animation"
      contains: "animate-in"
  key_links:
    - from: "web/src/components/ui/card.tsx"
      to: "tailwindcss"
      via: "hover:border-ring/50 class on Card base"
      pattern: "hover:border-ring"
    - from: "web/src/pages/Core.tsx"
      to: "tw-animate-css"
      via: "animate-in fade-in zoom-in-95 classes"
      pattern: "animate-in"
    - from: "web/src/pages/Inbounds.tsx"
      to: "tw-animate-css"
      via: "animate-in fade-in classes on content wrapper"
      pattern: "animate-in"
---

<objective>
Add consistent hover transitions to the Card base component and entrance animations to all remaining pages (Core, Inbounds, Users, Certificates, Subscriptions).

Purpose: Uniform hover feedback makes the UI feel responsive and polished. Entrance animations on every page create a cohesive "alive" feeling across the entire application.
Output: Updated Card component + 5 updated pages with entrance animations.
</objective>

<execution_context>
@/home/whj/.claude/get-shit-done/workflows/execute-plan.md
@/home/whj/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-ui-animation-foundation/11-RESEARCH.md
@.planning/phases/11-ui-animation-foundation/11-CONTEXT.md
@web/src/components/ui/card.tsx
@web/src/components/ui/table.tsx
@web/src/components/ui/button.tsx
@web/src/pages/Core.tsx
@web/src/pages/Inbounds.tsx
@web/src/pages/Users.tsx
@web/src/pages/Certificates.tsx
@web/src/pages/Subscriptions.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Card hover transition + Core/Inbounds/Certificates entrance</name>
  <files>web/src/components/ui/card.tsx, web/src/pages/Core.tsx, web/src/pages/Inbounds.tsx, web/src/pages/Certificates.tsx</files>
  <action>
**Card base hover** (`web/src/components/ui/card.tsx`):

Update the Card component's className to add hover border glow transition:

Current: `"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"`

Add: `transition-colors duration-150 hover:border-ring/50`

New: `"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm transition-colors duration-150 hover:border-ring/50"`

Per CONTEXT: "卡片 hover：边框微光（边框颜色变亮，不移动位置）" — border color brightens on hover. `ring/50` uses the theme's ring color at 50% opacity, giving a subtle glow. `duration-150` = 150ms (within CONTEXT 120-150ms range).

Note: Button already has `transition-all` with appropriate hover variants. TableRow already has `transition-colors` (150ms default) with `hover:bg-muted/50`. No changes needed for those — they already satisfy UIANM-04.

**Core.tsx entrance animations:**

Core has 2 Card sections: status card and config viewer card. Wrap each in an entrance animation div:

```tsx
{/* Status card */}
<div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none">
  <Card>
    {/* ...existing status card content... */}
  </Card>
</div>

{/* Config viewer card */}
<div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none" style={{ animationDelay: '75ms' }}>
  <Card>
    {/* ...existing config card content... */}
  </Card>
</div>
```

2 cards → delays: 0ms, 75ms. Per CONTEXT: fade + micro-scale (95%→100%), 200-300ms duration, stagger 50-100ms.

Also remove any existing manual `transition-shadow hover:shadow-md` from Core's Cards — the base Card now handles hover via border glow. If Core's Cards don't have this, no change needed.

**Inbounds.tsx entrance animations:**

Inbounds page has: header row (h1 + sort select + add button) + InboundTable. Wrap the main content in entrance animation:

```tsx
<div className="p-6 space-y-6">
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none">
    {/* header: h1 + controls */}
  </div>
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none" style={{ animationDelay: '75ms' }}>
    {/* InboundTable */}
  </div>
</div>
```

**Certificates.tsx entrance animations:**

Same pattern as Inbounds — header + CertificateTable:

```tsx
<div className="p-6 space-y-6">
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none">
    {/* header: h1 + add button */}
  </div>
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none" style={{ animationDelay: '75ms' }}>
    {/* CertificateTable */}
  </div>
</div>
```
  </action>
  <verify>
- `npm run build` succeeds.
- Inspect Card component in browser DevTools: has `transition-colors` and `duration-150` classes. Hovering changes border color smoothly.
- Core page: both cards fade+scale in with 75ms stagger.
- Inbounds page: header and table content fade in with stagger.
- Certificates page: header and table content fade in with stagger.
- No layout shift on any page during entrance.
  </verify>
  <done>
- Card base has `transition-colors duration-150 hover:border-ring/50` for consistent hover border glow.
- Core, Inbounds, Certificates pages have tw-animate-css entrance animations with staggered timing.
  </done>
</task>

<task type="auto">
  <name>Task 2: Users and Subscriptions entrance animations</name>
  <files>web/src/pages/Users.tsx, web/src/pages/Subscriptions.tsx</files>
  <action>
**Users.tsx entrance animations:**

Users page has: header (h1), search input row, UserTable, BatchActionBar (conditional). Wrap content sections:

```tsx
<div className="p-6 space-y-6">
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none">
    {/* h1 heading */}
  </div>
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none" style={{ animationDelay: '75ms' }}>
    {/* search + add button row */}
  </div>
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none" style={{ animationDelay: '150ms' }}>
    {/* UserTable + BatchActionBar */}
  </div>
</div>
```

The BatchActionBar appears/disappears based on selection — it should NOT have entrance animation (it has its own show/hide logic). Only the table wrapper gets the entrance.

**Subscriptions.tsx entrance animations:**

Subscriptions page has: header (h1) + table. Same pattern:

```tsx
<div className="p-6 space-y-6">
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none">
    {/* h1 heading */}
  </div>
  <div className="animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none" style={{ animationDelay: '75ms' }}>
    {/* Table content */}
  </div>
</div>
```

**Common pattern for all entrance animations in this plan:**
- Classes: `animate-in fade-in zoom-in-95 duration-300 fill-mode-both motion-reduce:animate-none`
- Stagger: 75ms between logical sections
- `fill-mode-both` prevents elements from being invisible before animation starts (prevents layout shift)
- `motion-reduce:animate-none` respects reduced-motion preference

After updating both pages, also verify Dashboard.tsx — it currently has `className="transition-shadow hover:shadow-md"` on each Card. Since Plan 01 handles Dashboard, do NOT touch Dashboard.tsx here. But note that after Plan 01 runs, Dashboard Cards will also benefit from the base Card hover border glow added in Task 1 of this plan.
  </action>
  <verify>
- `npm run build` succeeds.
- Users page: header, search bar, and table fade+scale in with stagger.
- Subscriptions page: header and table fade+scale in with stagger.
- Navigate between pages: entrance plays on each page visit.
- Data refresh (useQuery refetch): entrance does NOT replay.
- BatchActionBar on Users: no entrance animation (shows/hides based on selection state only).
  </verify>
  <done>
- Users and Subscriptions pages have staggered entrance animations.
- All 5 non-Dashboard/Traffic pages now have consistent entrance animations.
- Card base hover transition affects all Card instances across the entire app.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds with zero errors.
2. Card hover: on any page, hovering over a Card shows subtle border glow with ~150ms transition.
3. Button hover: background darkens (already working, no regression).
4. TableRow hover: background highlights (already working, no regression).
5. Core, Inbounds, Users, Certificates, Subscriptions: content fades+scales in on page load.
6. No layout shift on any page during entrance.
7. `prefers-reduced-motion: reduce` → entrance animations skip, hover transitions still work.
</verification>

<success_criteria>
- Card base component has hover border transition for global consistency
- All 5 remaining pages (Core, Inbounds, Users, Certificates, Subscriptions) have entrance animations
- Existing button and table row hover behavior unchanged (no regression)
- tw-animate-css classes used directly — no new dependencies
</success_criteria>

<output>
After completion, create `.planning/phases/11-ui-animation-foundation/11-02-SUMMARY.md`
</output>
